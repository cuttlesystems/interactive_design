<template>
    <div class="switch-dark-wrapper">
        <div class="switch-dark">
            <input type="checkbox" :checked="darkMode === true" @change="setMode">

            <span class="slider"></span>

            <div class="switch-dark-inner">
            
                <svg class="sun" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M14.091 9.9996C14.091 12.2594 12.2599 14.0905 10.0001 14.0905C7.74027 14.0905 5.90918 12.2594 5.90918 9.9996C5.90918 7.73978 7.74027 5.90869 10.0001 5.90869C12.2599 5.90869 14.091 7.73978 14.091 9.9996Z"
                        stroke="#FACC56" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path
                        d="M18.7744 6.82751C19.0815 6.95212 19.4314 6.80423 19.556 6.49718C19.6807 6.19013 19.5328 5.8402 19.2257 5.71559L18.7744 6.82751ZM15.2504 4.74973L14.6933 4.97265C14.7539 5.1241 14.8736 5.24434 15.0247 5.30569L15.2504 4.74973ZM14.3069 0.777082C14.1837 0.46943 13.8345 0.319833 13.5269 0.442948C13.2192 0.566062 13.0696 0.915267 13.1928 1.22292L14.3069 0.777082ZM13.9728 1.55709C14.2805 1.43404 14.4301 1.08486 14.3071 0.777187C14.184 0.469512 13.8349 0.319849 13.5272 0.442906L13.9728 1.55709ZM10.0003 2.49973L9.77746 3.05682C9.92049 3.11403 10.08 3.11403 10.2231 3.05682L10.0003 2.49973ZM6.47335 0.442906C6.16568 0.319849 5.8165 0.469512 5.69345 0.777187C5.57039 1.08486 5.72005 1.43404 6.02773 1.55709L6.47335 0.442906ZM6.80733 1.22292C6.93044 0.915267 6.78084 0.566062 6.47319 0.442948C6.16554 0.319833 5.81634 0.46943 5.69322 0.777082L6.80733 1.22292ZM4.74973 4.74973L4.97536 5.30569C5.12652 5.24434 5.24618 5.1241 5.30678 4.97265L4.74973 4.74973ZM0.774366 5.71559C0.467319 5.8402 0.319428 6.19013 0.444042 6.49718C0.568656 6.80423 0.918587 6.95212 1.22563 6.82751L0.774366 5.71559ZM1.55666 6.04764C1.43299 5.7402 1.08352 5.59123 0.776092 5.71489C0.46866 5.83855 0.319684 6.18802 0.443345 6.49545L1.55666 6.04764ZM2.49973 10L3.05637 10.224C3.11418 10.0803 3.11418 9.91979 3.05638 9.77609L2.49973 10ZM0.443362 13.5037C0.319677 13.8111 0.468627 14.1606 0.77605 14.2843C1.08347 14.408 1.43295 14.259 1.55664 13.9516L0.443362 13.5037ZM1.22574 13.1717C0.918715 13.047 0.568756 13.1949 0.444084 13.5019C0.319412 13.8089 0.467238 14.1589 0.774262 14.2835L1.22574 13.1717ZM4.74973 15.2503L5.30678 15.0274C5.24619 14.8759 5.12657 14.7557 4.97547 14.6944L4.74973 15.2503ZM5.69322 19.2229C5.81634 19.5306 6.16554 19.6802 6.47319 19.5571C6.78084 19.4339 6.93044 19.0847 6.80733 18.7771L5.69322 19.2229ZM6.02773 18.4429C5.72005 18.566 5.57039 18.9151 5.69345 19.2228C5.8165 19.5305 6.16568 19.6801 6.47335 19.5571L6.02773 18.4429ZM10.0003 17.5003L10.2231 16.9432C10.08 16.886 9.92049 16.886 9.77746 16.9432L10.0003 17.5003ZM13.5272 19.5571C13.8349 19.6801 14.184 19.5305 14.3071 19.2228C14.4301 18.9151 14.2805 18.566 13.9728 18.4429L13.5272 19.5571ZM13.1928 18.7771C13.0696 19.0847 13.2192 19.4339 13.5269 19.5571C13.8345 19.6802 14.1837 19.5306 14.3069 19.2229L13.1928 18.7771ZM15.2504 15.2503L15.0246 14.6944C14.8735 14.7557 14.7539 14.8759 14.6933 15.0274L15.2504 15.2503ZM19.2258 14.2835C19.5328 14.1589 19.6807 13.8089 19.556 13.5019C19.4313 13.1949 19.0814 13.047 18.7743 13.1717L19.2258 14.2835ZM18.4436 13.9516C18.5673 14.259 18.9168 14.408 19.2242 14.2843C19.5316 14.1606 19.6806 13.8111 19.5569 13.5037L18.4436 13.9516ZM17.5005 10L16.9439 9.77609C16.8861 9.91979 16.8861 10.0803 16.9439 10.224L17.5005 10ZM19.5569 6.49545C19.6806 6.18802 19.5316 5.83855 19.2242 5.71489C18.9167 5.59123 18.5673 5.7402 18.4436 6.04764L19.5569 6.49545ZM19.2257 5.71559L15.476 4.19377L15.0247 5.30569L18.7744 6.82751L19.2257 5.71559ZM15.8074 4.52681L14.3069 0.777082L13.1928 1.22292L14.6933 4.97265L15.8074 4.52681ZM13.5272 0.442906L9.77746 1.94263L10.2231 3.05682L13.9728 1.55709L13.5272 0.442906ZM10.2231 1.94263L6.47335 0.442906L6.02773 1.55709L9.77746 3.05682L10.2231 1.94263ZM5.69322 0.777082L4.19268 4.52681L5.30678 4.97265L6.80733 1.22292L5.69322 0.777082ZM4.52409 4.19377L0.774366 5.71559L1.22563 6.82751L4.97536 5.30569L4.52409 4.19377ZM0.443345 6.49545L1.94307 10.2239L3.05638 9.77609L1.55666 6.04764L0.443345 6.49545ZM1.94309 9.77605L0.443362 13.5037L1.55664 13.9516L3.05637 10.224L1.94309 9.77605ZM0.774262 14.2835L4.52399 15.8062L4.97547 14.6944L1.22574 13.1717L0.774262 14.2835ZM4.19268 15.4732L5.69322 19.2229L6.80733 18.7771L5.30678 15.0274L4.19268 15.4732ZM6.47335 19.5571L10.2231 18.0574L9.77746 16.9432L6.02773 18.4429L6.47335 19.5571ZM9.77746 18.0574L13.5272 19.5571L13.9728 18.4429L10.2231 16.9432L9.77746 18.0574ZM14.3069 19.2229L15.8074 15.4732L14.6933 15.0274L13.1928 18.7771L14.3069 19.2229ZM15.4761 15.8062L19.2258 14.2835L18.7743 13.1717L15.0246 14.6944L15.4761 15.8062ZM19.5569 13.5037L18.0572 9.77605L16.9439 10.224L18.4436 13.9516L19.5569 13.5037ZM18.0572 10.2239L19.5569 6.49545L18.4436 6.04764L16.9439 9.77609L18.0572 10.2239Z"
                        fill="#FACC56"/>
                </svg>
                <svg class="moon" width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M15.5455 14.3006C15.3229 14.3195 15.0996 14.3334 14.872 14.3334C10.6582 14.3334 7.24219 11.0505 7.24219 7.00028C7.24219 4.561 8.48582 2.40682 10.392 1.07373"
                        stroke="#ACB4BE" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path
                        d="M10.392 1.07345C10.0415 1.02982 9.68582 1 9.32291 1C4.72655 1 1 4.58182 1 9C1 13.4189 4.72655 17 9.32291 17C11.8015 17 14.0204 15.9535 15.5455 14.3004"
                        stroke="#ACB4BE" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>

            </div>

        </div>
        <p class="switch-dark-text">
            {{ __('Темный режим')}}
        </p>
    </div>
</template>

<script lang="ts">

import { computed, defineComponent, ref } from 'vue';
import { useStore } from '~/store'
import { MutationTypes } from '~/store/modules/mutations-types';
import { useRoute, useRouter } from "vue-router";



export default defineComponent({


    setup(context) {    // emit expose props

        const store = useStore()
        const route = useRoute()
        const router = useRouter()

        // STATE
        

        const darkMode = computed({
            get: () => store.getters['getMode'],
            set: (val) => {
                store.commit(MutationTypes.SET_DARK_MODE, val)
            }
        })

        function setMode(){
            darkMode.value = !darkMode.value
            
            if (darkMode.value) {

                document.body.classList.add('dark-mode')

            } else {

                document.body.classList.remove('dark-mode')

            }

        }

        function backLinkHandler() {
            router.go(-1)
        }

        return {
            darkMode,
            setMode,
            backLinkHandler,

        }
    }

})


</script>

<style lang="scss">
    


.switch-dark-wrapper {
  
  
  -webkit-filter: drop-shadow(0px 4px 40px rgba(0, 1, 83, 0.07));
  filter: drop-shadow(0px 4px 40px rgba(0, 1, 83, 0.07));
  
  height: -webkit-fit-content;
  height: -moz-fit-content;
  height: fit-content;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  flex-direction: row-reverse;
  justify-content: end;
  position: -webkit-sticky;
  
  z-index: 1001;
  
}

.switch-dark-text {
  font-family: "Product Sans";
  font-weight: 400;
  font-size: 15px;
  line-height: 20px;
  letter-spacing: -0.24px;
  color: #292A2F;
  margin-right: 12px;
}

.switch-dark {
  background: var(--pearl);
  border-radius: 24px;
  width: 44px;
  height: 24px;
  position: relative;
}

.switch-dark input {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  cursor: pointer;
  z-index: 1;
}

.switch-dark .slider {
  width: 20.4px;
  height: 20.4px;
  border-radius: 50%;
  background: var(--white);
  -webkit-box-shadow: 0 0 16px rgba(0, 0, 0, 0.12);
  box-shadow: 0 0 16px rgba(0, 0, 0, 0.12);
  position: absolute;
  top: 1.8px;
  left: 1.8px;
  -webkit-transition: 0.3s ease;
  -o-transition: 0.3s ease;
  transition: 0.3s ease;
}

.switch-dark-inner {
  width: 100%;
  height: 100%;
  position: relative;
  
}

.sun {
  position: absolute;
  top: 50%;
  -webkit-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  transform: translateY(-50%);
  left: 6px;
  width: 13px;
  height: 13px;
}

.moon {
  position: absolute;
  top: 50%;
  -webkit-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  transform: translateY(-50%);
  right: 5.5px;
  width: 12px;
  height: 13px;
}

.switch-dark input:checked + .slider {
  -webkit-transform: translateX(19.6px);
  -ms-transform: translateX(19.6px);
  transform: translateX(19.6px);
}

.switch-dark-wrapper {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-align: center;
  -ms-flex-align: center;
  align-items: center;
  margin-top: 23px;
}

</style>